{"version":3,"file":"index.js","sources":["../src/js/tools.js","../src/js/consts.js","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst Err = (typeError, emessage = 'empty message') => {\n  if (typeError === 'error') {\n    iziToast.error({\n      message: emessage,\n      position: 'topRight',\n      timeout: 5000,\n    });\n  } else if (typeError === 'success') {\n  }\n};\n\nexport { Err };\n","export const API_KEY = '49335646-80c9a1e6c5c5033cc7f2a4c93',\n  baseUrl = 'https://pixabay.com/api/',\n  pagination = { page: 1, per_page: 15 };\n","import { API_KEY, baseUrl, pagination } from './consts';\nimport axios from 'axios';\nconst getData = async search => {\n  search = search ? search : '';\n  const opt = {\n    key: API_KEY,\n    q: search,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: pagination.page,\n    per_page: pagination.per_page,\n  };\n  opt.page = pagination.page;\n  return await axios.get(baseUrl + '?' + new URLSearchParams(opt));\n};\n\nexport default getData;\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst render = data => {\n  if (data && data.total > 0) {\n    showLoader(false); // loader\n    showLoadMoreBtn(true); // load btn\n    const gallery = document.querySelector('.gallery');\n    const markup = data.hits\n      .map(\n        ({\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        }) => `\n          <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n              <img\n                class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n                width=\"350\" \n                height=\"290\"\n            />\n            </a>\n            <ul class=\"gallery-info\">\n              <li class=\"gallery-info-item\">\n                <p>Downloads</p>\n                <p>${downloads}</p>\n              </li>\n              <li class=\"gallery-info-item\">\n                <p>Comments</p>\n                <p>${comments}</p>\n              </li>\n              <li class=\"gallery-info-item\">\n                <p>Views</p>\n                <p>${views}</p>\n              </li>\n              <li class=\"gallery-info-item\">\n                <p>Likes</p>\n                <p>${likes}</p>\n              </li>\n            </ul>\n          </li>\n          `\n      )\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    // include slider\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt', // Use the alt attribute of images for captions\n      captionDelay: 250, // Delay in milliseconds before showing the caption\n    });\n  } else {\n    showLoader(false);\n    showLoadMoreBtn(false);\n    iziToast.success({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      position: 'topRight',\n      timeout: 5000,\n    });\n  }\n};\n\nconst showLoader = (flag = true) => {\n  const el = document.querySelector('span.loader');\n\n  if (flag) {\n    // show element\n    if (el.hasAttribute('style')) {\n      el.removeAttribute('style');\n    }\n  } else {\n    if (!el.hasAttribute('style')) {\n      el.setAttribute('style', 'display:none');\n    }\n  }\n};\n\nconst showLoadMoreBtn = (flag = true) => {\n  const el = document.querySelector('.load-more-btn');\n  if (flag) {\n    // show element\n    if (el.hasAttribute('style')) {\n      el.removeAttribute('style');\n    }\n  } else {\n    if (!el.hasAttribute('style')) {\n      el.setAttribute('style', 'display:none');\n    }\n  }\n};\nexport { render, showLoader, showLoadMoreBtn };\n","import { Err } from './js/tools';\nimport getData from './js/pixabay-api';\nimport { render, showLoader, showLoadMoreBtn } from './js/render-functions';\nimport { pagination } from './js/consts';\n\nshowLoader(false); // remove loader\nshowLoadMoreBtn(false); // remove load more btn\n// Search handler Btn\ndocument.querySelector('.form').addEventListener('submit', event => {\n  event.preventDefault();\n  const formData = new FormData(event.target);\n  const formProps = Object.fromEntries(formData);\n  if (!formProps.search) {\n    showLoadMoreBtn(false);\n    showLoader(false);\n    return Err(\n      'error',\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n  } else {\n    showLoader(true);\n  }\n  document.querySelector('ul.gallery').innerHTML = ''; // clear content\n  const main = document.querySelector('span.loader');\n  getData(formProps.search)\n    .then(res => {\n      const total = Math.ceil(res.data.totalHits / pagination.per_page);\n      if (res.status != 200) {\n        return Err('error', 'Server response fail'); // check\n      }\n      if (pagination.page > total) {\n        showLoadMoreBtn(false);\n        showLoader(false);\n        return Err('error', \"We're sorry, there are no more posts to load\"); // load posts\n      }\n      main.innerHtml = render(res.data); // render\n      pagination.page += 1; // next page (group)\n    })\n    .catch(e => {\n      showLoader(false); // remove loader\n      return Err('error', e.message);\n    });\n});\n\n// Load More Btn\ndocument.querySelector('.load-more-btn').addEventListener('submit', event => {\n  const main = document.querySelector('span.loader');\n  const formData = new FormData(event.target);\n  const formProps = Object.fromEntries(formData);\n  getData(formProps.search)\n    .then(res => {\n      const total = Math.ceil(res.data.totalHits / pagination.per_page);\n      if (res.status != 200) {\n        return Err('error', 'Server response fail'); // check\n      }\n      if (pagination.page > total) {\n        showLoadMoreBtn(false);\n        return Err('error', \"We're sorry, there are no more posts to load\"); // load posts\n      }\n      main.innerHtml = render(res.data); // render\n      pagination.page += 1; // next page (group)\n    })\n    .catch(e => {\n      showLoader(false); // remove loader\n      return Err('error', e.message);\n    });\n});\n"],"names":["Err","typeError","emessage","iziToast","API_KEY","baseUrl","pagination","getData","search","opt","axios","render","data","showLoader","showLoadMoreBtn","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","flag","el","event","formData","formProps","main","res","total"],"mappings":"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"}